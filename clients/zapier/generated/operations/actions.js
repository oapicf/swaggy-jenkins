const BaseApi = require('../apis/BaseApi');
const BlueOceanApi = require('../apis/BlueOceanApi');
const RemoteAccessApi = require('../apis/RemoteAccessApi');
const { triggerMiddleware, isTrigger, searchMiddleware, hasSearchRequisites, isSearchAction, isCreateAction, createMiddleware } = require('../utils/utils');

const actions = {
    [BaseApi.getCrumb.key]: BaseApi.getCrumb,
    [BlueOceanApi.deletePipelineQueueItem.key]: BlueOceanApi.deletePipelineQueueItem,
    [BlueOceanApi.getAuthenticatedUser.key]: BlueOceanApi.getAuthenticatedUser,
    [BlueOceanApi.getClasses.key]: BlueOceanApi.getClasses,
    [BlueOceanApi.getJsonWebKey.key]: BlueOceanApi.getJsonWebKey,
    [BlueOceanApi.getJsonWebToken.key]: BlueOceanApi.getJsonWebToken,
    [BlueOceanApi.getOrganisation.key]: BlueOceanApi.getOrganisation,
    [BlueOceanApi.getOrganisations.key]: BlueOceanApi.getOrganisations,
    [BlueOceanApi.getPipeline.key]: BlueOceanApi.getPipeline,
    [BlueOceanApi.getPipelineActivities.key]: BlueOceanApi.getPipelineActivities,
    [BlueOceanApi.getPipelineBranch.key]: BlueOceanApi.getPipelineBranch,
    [BlueOceanApi.getPipelineBranchRun.key]: BlueOceanApi.getPipelineBranchRun,
    [BlueOceanApi.getPipelineBranches.key]: BlueOceanApi.getPipelineBranches,
    [BlueOceanApi.getPipelineFolder.key]: BlueOceanApi.getPipelineFolder,
    [BlueOceanApi.getPipelineFolderPipeline.key]: BlueOceanApi.getPipelineFolderPipeline,
    [BlueOceanApi.getPipelineQueue.key]: BlueOceanApi.getPipelineQueue,
    [BlueOceanApi.getPipelineRun.key]: BlueOceanApi.getPipelineRun,
    [BlueOceanApi.getPipelineRunLog.key]: BlueOceanApi.getPipelineRunLog,
    [BlueOceanApi.getPipelineRunNode.key]: BlueOceanApi.getPipelineRunNode,
    [BlueOceanApi.getPipelineRunNodeStep.key]: BlueOceanApi.getPipelineRunNodeStep,
    [BlueOceanApi.getPipelineRunNodeStepLog.key]: BlueOceanApi.getPipelineRunNodeStepLog,
    [BlueOceanApi.getPipelineRunNodeSteps.key]: BlueOceanApi.getPipelineRunNodeSteps,
    [BlueOceanApi.getPipelineRunNodes.key]: BlueOceanApi.getPipelineRunNodes,
    [BlueOceanApi.getPipelineRuns.key]: BlueOceanApi.getPipelineRuns,
    [BlueOceanApi.getPipelines.key]: BlueOceanApi.getPipelines,
    [BlueOceanApi.getSCM.key]: BlueOceanApi.getSCM,
    [BlueOceanApi.getSCMOrganisationRepositories.key]: BlueOceanApi.getSCMOrganisationRepositories,
    [BlueOceanApi.getSCMOrganisationRepository.key]: BlueOceanApi.getSCMOrganisationRepository,
    [BlueOceanApi.getSCMOrganisations.key]: BlueOceanApi.getSCMOrganisations,
    [BlueOceanApi.getUser.key]: BlueOceanApi.getUser,
    [BlueOceanApi.getUserFavorites.key]: BlueOceanApi.getUserFavorites,
    [BlueOceanApi.getUsers.key]: BlueOceanApi.getUsers,
    [BlueOceanApi.postPipelineRun.key]: BlueOceanApi.postPipelineRun,
    [BlueOceanApi.postPipelineRuns.key]: BlueOceanApi.postPipelineRuns,
    [BlueOceanApi.putPipelineFavorite.key]: BlueOceanApi.putPipelineFavorite,
    [BlueOceanApi.putPipelineRun.key]: BlueOceanApi.putPipelineRun,
    [BlueOceanApi.search.key]: BlueOceanApi.search,
    [BlueOceanApi.searchClasses.key]: BlueOceanApi.searchClasses,
    [RemoteAccessApi.getComputer.key]: RemoteAccessApi.getComputer,
    [RemoteAccessApi.getJenkins.key]: RemoteAccessApi.getJenkins,
    [RemoteAccessApi.getJob.key]: RemoteAccessApi.getJob,
    [RemoteAccessApi.getJobConfig.key]: RemoteAccessApi.getJobConfig,
    [RemoteAccessApi.getJobLastBuild.key]: RemoteAccessApi.getJobLastBuild,
    [RemoteAccessApi.getJobProgressiveText.key]: RemoteAccessApi.getJobProgressiveText,
    [RemoteAccessApi.getQueue.key]: RemoteAccessApi.getQueue,
    [RemoteAccessApi.getQueueItem.key]: RemoteAccessApi.getQueueItem,
    [RemoteAccessApi.getView.key]: RemoteAccessApi.getView,
    [RemoteAccessApi.getViewConfig.key]: RemoteAccessApi.getViewConfig,
    [RemoteAccessApi.headJenkins.key]: RemoteAccessApi.headJenkins,
    [RemoteAccessApi.postCreateItem.key]: RemoteAccessApi.postCreateItem,
    [RemoteAccessApi.postCreateView.key]: RemoteAccessApi.postCreateView,
    [RemoteAccessApi.postJobBuild.key]: RemoteAccessApi.postJobBuild,
    [RemoteAccessApi.postJobConfig.key]: RemoteAccessApi.postJobConfig,
    [RemoteAccessApi.postJobDelete.key]: RemoteAccessApi.postJobDelete,
    [RemoteAccessApi.postJobDisable.key]: RemoteAccessApi.postJobDisable,
    [RemoteAccessApi.postJobEnable.key]: RemoteAccessApi.postJobEnable,
    [RemoteAccessApi.postJobLastBuildStop.key]: RemoteAccessApi.postJobLastBuildStop,
    [RemoteAccessApi.postViewConfig.key]: RemoteAccessApi.postViewConfig,
}

module.exports = {
    searchActions: () => Object.entries(actions).reduce((actions, [key, value]) => isSearchAction(key) && hasSearchRequisites(value) ? {...actions, [key]: searchMiddleware(value)} : actions, {}),
    createActions: () => Object.entries(actions).reduce((actions, [key, value]) => isCreateAction(key) ? {...actions, [key]: createMiddleware(value)} : actions, {}),
    triggers: () => Object.entries(actions).reduce((actions, [key, value]) => isTrigger(key) ? {...actions, [key]: triggerMiddleware(value)} : actions, {}),
}
